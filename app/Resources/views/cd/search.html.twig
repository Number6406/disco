{% extends 'base.html.twig' %}

{% block body %}

	<form class="form-horizontal" method="post" >
	<fieldset>

	<!-- Form Name -->
	<legend>Recherche de CD</legend>

	<div class="row col-lg-12">
		<div class="col-xs-6">
			<!-- Text input-->
			<div class="form-group">
			  <label class="col-md-4 control-label" for="cd">Par Numéro</label>  
			  <div class="col-md-4">
			  <input id="cd" name="num" placeholder="" class="form-control input-md" type="text" {% if post %}value="{{post.num}}"{% endif %} >
			    
			  </div>
			</div>

			<!-- Text input-->
			<div class="form-group">
			  <label class="col-md-4 control-label" for="titre">Par Titre</label>  
			  <div class="col-md-4">
			  <input id="titre" name="titre" placeholder="" class="form-control input-md" type="text" {% if post %}value="{{post.titre}}"{% endif %} >
			    
			  </div>
			</div>

			<!-- Text input-->
			<div class="form-group">
			  <label class="col-md-4 control-label" for="artiste">Par Artiste</label>  
			  <div class="col-md-4">
			  <input id="artiste" name="artiste" placeholder="" class="form-control input-md" type="text" {% if post %}value="{{post.artiste}}"{% endif %} >
			    
			  </div>
			</div>

			<!-- Text input-->
			<div class="form-group">
			  <label class="col-md-4 control-label" for="label">Par Label</label>  
			  <div class="col-md-4">
			  <input id="label" name="label" placeholder="" class="form-control input-md" type="text" {% if post %}value="{{post.label}}"{% endif %} >
			    
			  </div>
			</div>

			<!-- Text input-->
			<div class="form-group">
			  <label class="col-md-4 control-label" for="annee">Par Annee</label>  
			  <div class="col-md-4">
			  <input id="annee" name="annee" placeholder="" class="form-control input-md" type="text">
			    
			  </div>
			</div>
		</div>
		<div class="col-xs-6">
			<!-- Select Basic -->
				<div class="form-group">
				  <label class="col-md-4 control-label" for="langue">Par Langue</label>
				  <div class="col-md-4">
				    <select id="langue" name="langue" class="form-control">
					    <option name=""></option>
					    {% for langue in langues %}
					    	<option name="langue" value="{{langue.getLangue}}">{{langue.getLibelle}}</option>
					    {% endfor %}
				    </select>
				  </div>
				</div>

				<!-- Select Basic -->
				<div class="form-group">
				  <label class="col-md-4 control-label" for="genre">Par Genre</label>
				  <div class="col-md-4">
				    <select id="genre" name="genre" class="form-control">
					    <option name=""></option>
				    	{% for genre in genres %}
					    	<option name="genre" value="{{genre.getGenre}}">{{genre.getLibelle}}</option>
					    {% endfor %}
				    </select>
				  </div>
				</div>

				<!-- Select Basic -->
				<div class="form-group">
				  <label class="col-md-4 control-label" for="rotation">Par Rotation</label>
				  <div class="col-md-4">
				    <select id="rotation" name="rotation" class="form-control">
					    <option name=""></option>
				    	{% for rotation in rotations %}
					    	<option name="rotation" value="{{rotation.getRotation}}">{{rotation.getLibelle}}</option>
					    {% endfor %}
				    </select>
				  </div>
				</div>

				<!-- Select Basic -->
				<div class="form-group">
				  <label class="col-md-4 control-label" for="support">Par Support</label>
				  <div class="col-md-4">
				    <select id="support" name="support" class="form-control">
					    <option name=""></option>
				    	{% for support in supports %}
					    	<option name="support" value="{{support.getSupport}}">{{support.getLibelle}}</option>
					    {% endfor %}
				    </select>
				  </div>
				</div>

				<!-- Select Basic -->
				<div class="form-group">
				  <label class="col-md-4 control-label" for="type">Par Type</label>
				  <div class="col-md-4">
				    <select id="type" name="type" class="form-control">
					    <option name=""></option>
				    	{% for type in types %}
					    	<option name="type" value="{{type.getType}}">{{type.getLibelle}}</option>
					    {% endfor %}
				    </select>
				  </div>
				</div>
		</div>
	</div>

	<button name="search" type="submit" class="btn btn-block btn-info">Chercher <span class="glyphicon glyphicon-eye-open"></span></button>
	</fieldset>
	</form>

{% if recherche %}	
<div class="row">
	{% if recherche.cd %}
	<div class="col-md-12">
		<div class="panel panel-success">
			<div class="panel-heading">CD trouvés</div>
				<div class="table-responsive">
					<table class="table table-striped">
						<thead>
							<tr>
								<th>#</th>
								<th></th>
								<th>Annee</th>
								<th>Titre</th>
								<th>Action</th>
								<th>Artiste</th>
								<th>Label</th>
								<th>Langue</th>
								<th>Genre</th>
								<th>Type</th>
								<th>Support</th>
							</tr>
						</thead>
						{% for cd in recherche.cd %}
							<tr>
								<td>{{cd.getCd}}</td>
								<td>
									{% if cd.getDsaisie|date("U") > "-3 months"|date("U") %}<div class="label label-success">Nouveauté</div>{% endif %}
								</td>
								<td>{% if cd.getAnnee %}{{cd.getAnnee}}{% endif %}</td>
								<td>{{cd.getTitre}}</td>
								<td><a href="{{ path('showCd',{'id':cd.getCd}) }}"><span class="glyphicon glyphicon-eye-open"></span></a></td>
								<td><a href="{{ path('showArtiste',{'id':cd.getArtiste.getArtiste}) }}">{{cd.getArtiste.getLibelle}}</a></td>
								<td>{% if cd.getLabel.getLabel %}<a href="{{ path('showLabel',{'id':cd.getLabel.getLabel}) }}">{{cd.getLabel.getLibelle}}</a>{% endif %}</td>
								<td>{% if cd.getLangue.getLangue %}{{cd.getLangue.getLibelle}}{% endif %}</td>
								<td>{% if cd.getGenre.getGenre %}{{cd.getGenre.getLibelle}}{% endif %}</td>
								<td>{% if cd.getType.getType %}{{cd.getType.getLibelle}}{% endif %}</td>
								<td>{% if cd.getSupport.getSupport %}{{cd.getSupport.getLibelle}}{% endif %}</td>
							</tr>
						{% endfor %}
					</table>
				</div>
			</div>
		</div>
	{% endif %}
</div>


{% endif %}

{% endblock %}
