{% extends 'base.html.twig' %}

{% block body %}
	<h1>Fiche de disque #{{cd.getCD}}</h1>
	<table>
		<tr>
			<th>N°</th>
			<td> {{cd.getCd}}</td>
		</tr>
		<tr>
			<th>Titre</th>
			<td> {{cd.getTitre}}</td>
		</tr>
		<tr>
			<th>Artiste</th>
			<td>{{cd.getArtiste.getLibelle}}</td>
		</tr>
		<tr>
			<th>Label</th>
			<td>{% if cd.getLabel.getLabel != 0 %} {{cd.getLabel.getLibelle}}{% endif %}</td>
		</tr>
		<tr>
			<th>Maison</th>
			<td>{% if cd.getMaison.getLabel != 0 %} {{cd.getMaison.getLibelle}} {% endif %} </td>
		</tr>
		<tr>
			<th>Date sortie</th>
			<td> {{cd.getDsortie|date("d/m/Y")}}</td>
		</tr>
		<tr>
			<th>Année</th>
			<td> {{cd.getAnnee}}</td>
		</tr>
		<tr>
			<th>Type</th>
			<td> {{cd.getType.getLibelle}}</td>
		</tr>
		<tr>
			<th>Support</th>
			<td> {{cd.getSupport.getLibelle}}</td>
		</tr>
		<tr>
			<th>Genre principal</th>
			<td> {{cd.getGenre.getLibelle}}</td>
		</tr>
		<tr>
			<th>Styles secondaires</th>
			<td>
				<ul>
					{% for style in cd.getStyles.toArray %}
						<li>{{style.getGenre.getLibelle}}</li>
					{% endfor %}
				</ul>
			</td>
		</tr>
		<tr>
			<th>Langue</th>
			<td> {{cd.getLangue.getLibelle}}</td>
		</tr>
		<tr>
			<th>Rotation</th>
			<td>{% if cd.getRotation.getRotation <= 8 %} {{cd.getRotation.getLibelle}} {% endif %}</td>
		</tr>
		<tr>
			<th>Programmateur</th>
			<td>{% if cd.getUserprogra.getUser != 0 %} {{cd.getUserprogra.getLibelle}} {% endif %} </td>
		</tr>
		<tr>
			<th>Dprogra ?</th>
			<td> {{cd.getDprogra}}</td>
		</tr>
		<tr>
			<th>Commentaire</th>
			<td> {{cd.getComment}}</td>
		</tr>
		<tr>
			<th>Date de saisie</th>
			<td> {{cd.getDsaisie|date("d/m/Y")}}</td>
		</tr>
		<tr>
			<th>Jour de saisie</th>
			<td> {{cd.getJsaisie}}</td>
		</tr>
		<tr>
			<th>Présence de DVD ?</th>
			<td> {{cd.getDvd}}</td>
		</tr>
		<tr>
			<th>Note moyenne</th>
			<td> {{cd.getNotemoy|round(1, 'ceil')}}</td>
		</tr>
		<tr>
			<th>Présence dans l'airplay ?</th>
			<td> {{cd.getAirplay}}</td>
		</tr>
		<tr>
			<th>Mail de retour </th>
			<td> {{cd.getRetourmail}}</td>
		</tr>
		<tr>
			<th>Retour Label effectué ?</th>
			<td> {{cd.getRetourlabel}}</td>
		</tr>
		<tr>
			<th>Retour Comment effectué ?</th>
			<td> {{cd.getRetourcomment}}</td>
		</tr>
		<tr>
			<th>Artistes variés ?</th>
			<td> {{cd.getVarious}}</td>
		</tr>
		<tr>
			<th>Nombre de pistes</th>
			<td> {{cd.getNbpiste}}</td>
		</tr>
		<tr>
			<th>Paulo ?</th>
			<td> {{cd.getPaulo}}</td>
		</tr>
		<tr>
			<th>Etiquette ?</th>
			<td> {{cd.getEtiquette}}</td>
		</tr>
		<tr>
			<th>Librairie Artiste</th>
			<td> {{cd.getLibartiste}}</td>
		</tr>
		<tr>
			<th>Libelle</th>
			<td> {{cd.getLibelle}}</td>
		</tr>
		<tr>
			<th>Id Disque</th>
			<td> {{cd.getDiscid}}</td>
		</tr>
		<tr>
			<th>Référence du label</th>
			<td> {{cd.getReflabel}}</td>
		</tr>
		<tr>
			<th>Supprimé de la base ?</th>
			<td> {{cd.getSuppr}}</td>
		</tr>
		<tr>
			<th>Retour attendu ?</th>
			<td> {{cd.getRetourattendu}}</td>
		</tr>
		<tr>
			<th>Image</th>
			<td> {{cd.getImg}}</td>
		</tr>
	</table>

	<h2>Pistes :</h2>
	<table>
		<tr><th>titre de la piste</th><th>Artiste</th><th>Langue</th><th>Anim</th><th>Paulo</th><th>Star</th></tr>
		{% for piste in cd.getPistes.toArray %}
			<tr>
				<td>{{piste.getTitre}}</td>
				<td>{% if piste.getArtiste.getArtiste != 0 %}{{piste.getArtiste.getLibelle}}{% else %}{{cd.getArtiste.getLibelle}}{% endif %}</td>
				<td>{% if piste.getLangue.getLangue != 0 %}{{piste.getLangue}}{% else %}{{cd.getLangue.getLibelle}}{% endif %}</td>
				<td>{{piste.getAnim}}</td>
				<td>{{piste.getPaulo}}</td>
				<td>{{piste.getStar}}</td>
			</tr>
		{% endfor %}
	</table>

	<h2>Commentaires :</h2>
	{% for commentaire in cd.getComments.toArray %}
		<div style="border:1px solid grey">
			<div style="font-weight:bold">Ecrit par {{commentaire.getUser.getLibelle}}</div>
			{{commentaire.getComment}}
		</div>
	{% endfor %}

	<h2>Toutes les notes :</h2>
	<table>
		<tr><th>Utilisateur</th><th>Note</th></tr>
		{% for note in cd.getNotes.toArray %}
			<tr>
				<td>{{note.getUser.getLibelle}}</td>
				<td>{{note.getNote|round(1, 'ceil')}}</td>
			</tr>
		{% endfor %}
	</table>

	<h2>Historique des emprunts</h2>
	<table>
		<tr>
			<th>N° d'exemplaire</th>
			<th>Utilisateur</th>
			<th>Date</th>
			<th>Perdu ?</th>
		</tr>
		{% for emprunt in cd.getEmprunts.toArray %}
			<tr>
				<td>{{emprunt.getNumex}}</td>
				<td>{% if emprunt.getUser.getUser !=0 %}{{emprunt.getUser.getLibelle}}{% endif %}</td>
				<td>{{emprunt.getChrono|date("d/m/Y")}}</td>
				<td>{{emprunt.getDisparu}}</td>
			</tr>
		{% endfor %}
	</table>

{{dump(cd.getPistes)}}

{% endblock %}
